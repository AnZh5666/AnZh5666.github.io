"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}var mySwiper=new Swiper(".swiper-container",{loop:!0,navigation:{nextEl:".slider-button-next",prevEl:".slider-button-prev"}}),buttonCart=document.querySelector(".button-cart"),modalCart=document.querySelector("#modal-cart"),modalCloseBtn=document.querySelector(".modal-close"),openModal=function(){modalCart.classList.add("show"),cart.renderCart()};buttonCart.addEventListener("click",openModal);var closeModal=function(){modalCart.classList.remove("show")};modalCart.addEventListener("click",function(t){var e=t.target;(e.classList.contains("overlay")||e.classList.contains("modal-close"))&&closeModal()});var escapeHandler=function(t){"Escape"===t.code&&closeModal()};document.addEventListener("keydown",escapeHandler);var scrollLinks=document.querySelectorAll("a.scroll-link"),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var r=_step.value;r.addEventListener("click",function(t){t.preventDefault();var e=r.getAttribute("href");document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"})})},_iterator=scrollLinks[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(t){_didIteratorError=!0,_iteratorError=t}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var btnMore=document.querySelector("a.more"),navLink=document.querySelectorAll(".navigation-link:not(.show-all"),longGoodsList=document.querySelector(".long-goods-list"),getGoods=function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(fetch("db/db.json"));case 2:if((e=t.sent).ok){t.next=5;break}throw"Ошибка "+e.status;case 5:return t.abrupt("return",e.json());case 6:case"end":return t.stop()}})},createCard=function(t){var e=t.label,r=t.name,o=t.img,n=t.description,a=t.id,c=t.price,i=document.createElement("div");return i.className="col-lg-3 col-sm-6",i.innerHTML='\n\t\t<div class="goods-card">\n\t\t\t'.concat(e?'<span class="label">'.concat(e,"</span>"):"",'\n\t\t\t\n\t\t\t<img src="db/').concat(o,'" alt="image: Hoodie" class="goods-image">\n\t\t\t<h3 class="goods-title">').concat(r,'</h3>\n\t\t\t<p class="goods-description">').concat(n,'</p>\n\t\t\t<button class="button goods-card-btn add-to-cart" data-id=').concat(a,'>\n\t\t\t\t<span class="button-price">$').concat(c,"</span>\n\t\t\t</button>\n\t\t</div>\n\t"),i},renderCards=function(t){longGoodsList.textContent="";var e=t.map(createCard);longGoodsList.append.apply(longGoodsList,_toConsumableArray(e)),document.body.classList.add("show-goods")};btnMore.addEventListener("click",function(t){t.preventDefault(),getGoods().then(renderCards)}),btnMore.addEventListener("click",function(){var t=btnMore.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})});var filterCards=function(e,r){getGoods().then(function(t){return t.filter(function(t){return t[e]===r})}).then(renderCards)};navLink.forEach(function(o){o.addEventListener("click",function(t){t.preventDefault();var e=o.dataset.field,r=o.textContent;filterCards(e,r)})});var showAll=document.querySelectorAll(".show-all"),viewAll=function(t){t.preventDefault(),getGoods().then(renderCards)};showAll.forEach(function(t){t.addEventListener("click",viewAll)});var showAccessories=document.querySelectorAll(".show-accessories"),showClothing=document.querySelectorAll(".show-clothing");showClothing.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),filterCards("category","Clothing")})}),showAccessories.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),filterCards("category","Accessories")})});var cartTableGoods=document.querySelector(".cart-table__goods"),cardTableTotal=document.querySelector(".card-table__total"),cart={cartGoods:[],renderCart:function(){cartTableGoods.textContent="",this.cartGoods.forEach(function(t){var e=t.id,r=t.name,o=t.price,n=t.count,a=document.createElement("tr");a.className="cart-item",a.dataset.id=e,a.innerHTML="\n\t\t\t\t<td>".concat(r,"</td>\n\t\t\t\t<td>").concat(o,'</td>\n\t\t\t\t<td><button class="cart-btn-minus" data-id="').concat(e,'">-</button></td>\n\t\t\t\t<td>').concat(n,'</td>\n\t\t\t\t<td><button class="cart-btn-plus" data-id="').concat(e,'">+</button></td>\n\t\t\t\t<td>').concat(o*n,'</td>\n\t\t\t\t<td><button class="cart-btn-delete" data-id="').concat(e,'">x</button></td>\n\t\t\t'),cartTableGoods.append(a)});document.querySelector(".cart-count");var t=this.cartGoods.reduce(function(t,e){return t+e.price*e.count},0);cardTableTotal.textContent=t+"$"},deleteGood:function(e){this.cartGoods=this.cartGoods.filter(function(t){return e!==t.id}),this.renderCart()},minusGood:function(t){var e=!0,r=!1,o=void 0;try{for(var n,a=this.cartGoods[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var c=n.value;if(c.id===t){c.count<=1?this.deleteGood(t):c.count--;break}}}catch(t){r=!0,o=t}finally{try{e||null==a.return||a.return()}finally{if(r)throw o}}this.renderCart()},plusGood:function(t){var e=!0,r=!1,o=void 0;try{for(var n,a=this.cartGoods[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var c=n.value;if(c.id===t){c.count++;break}}}catch(t){r=!0,o=t}finally{try{e||null==a.return||a.return()}finally{if(r)throw o}}this.renderCart()},addCartGoods:function(e){var n=this;this.cartGoods.find(function(t){return t.id===e})?this.plusGood(e):getGoods().then(function(t){return t.find(function(t){return t.id===e})}).then(function(t){var e=t.id,r=t.name,o=t.price;n.cartGoods.push({id:e,name:r,price:o,count:1})})}};document.body.addEventListener("click",function(t){var e=t.target.closest(".add-to-cart");e&&cart.addCartGoods(e.dataset.id)}),cartTableGoods.addEventListener("click",function(t){var e=t.target;e.classList.contains("cart-btn-delete")&&cart.deleteGood(e.dataset.id),e.classList.contains("cart-btn-minus")&&cart.minusGood(e.dataset.id),e.classList.contains("cart-btn-plus")&&cart.plusGood(e.dataset.id)});
//# sourceMappingURL=main.min.js.map
